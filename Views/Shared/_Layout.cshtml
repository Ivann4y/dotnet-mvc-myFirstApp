<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>@ViewBag.Title | PRG</title>
    <!--begin::Accessibility Meta Tags-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="color-scheme" content="light dark" />
    <meta name="theme-color" content="#007bff" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#1a1a1a" media="(prefers-color-scheme: dark)" />
    <!--end::Accessibility Meta Tags-->
    <!--begin::Primary Meta Tags-->
    <meta name="title" content="Main Sidebar Component | AdminLTE 4" />
    <meta name="author" content="ColorlibHQ" />
    <meta name="description"
          content="AdminLTE is a Free Bootstrap 5 Admin Dashboard, 30 example pages using Vanilla JS. Fully accessible with WCAG 2.1 AA compliance." />
    <meta name="keywords"
          content="bootstrap 5, bootstrap, bootstrap 5 admin dashboard, bootstrap 5 dashboard, bootstrap 5 charts, bootstrap 5 calendar, bootstrap 5 datepicker, bootstrap 5 tables, bootstrap 5 datatable, vanilla js datatable, colorlibhq, colorlibhq dashboard, colorlibhq admin dashboard, accessible admin panel, WCAG compliant" />
    <!--end::Primary Meta Tags-->
    <!--begin::Accessibility Features-->
    <!-- Skip links will be dynamically added by accessibility.js -->
    <meta name="supported-color-schemes" content="light dark" />
    <link rel="preload" href="~/dist/css/adminlte.css" as="style" />
    <!--end::Accessibility Features-->
    <!--begin::Fonts-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/@@fontsource/source-sans-3@5.0.12/index.css"
          integrity="sha256-tXJfXfp6Ewt1ilPzLDtQnJV4hclT9XuaZUKyUvmyr+Q="
          crossorigin="anonymous"
          media="print"
          onload="this.media='all'" />
    <!--end::Fonts-->
    <!--begin::Third Party Plugin(OverlayScrollbars)-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/styles/overlayscrollbars.min.css"
          crossorigin="anonymous" />
    <!--end::Third Party Plugin(OverlayScrollbars)-->
    <!--begin::Third Party Plugin(Bootstrap Icons)-->
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
          crossorigin="anonymous" />
    <!--end::Third Party Plugin(Bootstrap Icons)-->
    <!--begin::Required Plugin(AdminLTE)-->
    <link rel="stylesheet" href="~/dist/css/adminlte.css" />
    <!--end::Required Plugin(AdminLTE)-->
</head>
<body class="layout-fixed sidebar-expand-lg sidebar-open bg-body-tertiary">
    <div class="app-wrapper">
        @await Html.PartialAsync("_Navbar")
        @await Html.PartialAsync("_Sidebar")

        <main class="app-main">
            @RenderBody()   <!-- tempat konten dari view -->
        </main>
        @await Html.PartialAsync("_Footer")
    </div>

    <!-- Third Party Plugin(OverlayScrollbars) -->
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.11.0/browser/overlayscrollbars.browser.es6.min.js" crossorigin="anonymous"></script>

    <!-- Required Plugin(popperjs for Bootstrap 5) -->
    <script src="https://cdn.jsdelivr.net/npm/@@popperjs/core@2.11.8/dist/umd/popper.min.js" crossorigin="anonymous"></script>

    <!-- Required Plugin(Bootstrap 5) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <!-- Required Plugin(AdminLTE) -->
    <script src="~/dist/js/adminlte.js"></script>

    <!-- SortableJS -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js" crossorigin="anonymous"></script>
    <script>
        new Sortable(document.querySelector('.connectedSortable'), {
          group: 'shared',
          handle: '.card-header',
        });
        document.querySelectorAll('.connectedSortable .card-header')
          .forEach(cardHeader => cardHeader.style.cursor = 'move');
    </script>

    <!-- OverlayScrollbars Configure -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
          const sidebarWrapper = document.querySelector('.sidebar-wrapper');
          if (sidebarWrapper && OverlayScrollbarsGlobal?.OverlayScrollbars !== undefined) {
            OverlayScrollbarsGlobal.OverlayScrollbars(sidebarWrapper, {
              scrollbars: {
                theme: 'os-theme-light',
                autoHide: 'leave',
                clickScroll: true,
              },
            });
          }
        });
    </script>

    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js" crossorigin="anonymous"></script>
    <script>
        // Revenue Chart
        const revenue_chart_options = {
          series: [
            { name: 'Digital Goods', data: [28, 48, 40, 19, 86, 27, 90] },
            { name: 'Electronics', data: [65, 59, 80, 81, 56, 55, 40] },
          ],
          chart: { height: 300, type: 'area', toolbar: { show: false } },
          legend: { show: false },
          colors: ['#0d6efd', '#20c997'],
          dataLabels: { enabled: false },
          stroke: { curve: 'smooth' },
          xaxis: {
            type: 'datetime',
            categories: [
              '2023-01-01','2023-02-01','2023-03-01',
              '2023-04-01','2023-05-01','2023-06-01','2023-07-01'
            ],
          },
          tooltip: { x: { format: 'MMMM yyyy' } },
        };
        new ApexCharts(document.querySelector('#revenue-chart'), revenue_chart_options).render();

        // Monthly Sales Chart
        const monthly_sales_options = {
          series: [
            { name: 'Digital Goods', data: [28, 48, 40, 19, 86, 27, 90] },
            { name: 'Electronics', data: [65, 59, 80, 81, 56, 55, 40] },
          ],
          chart: { height: 180, type: 'area', toolbar: { show: false } },
          legend: { show: false },
          colors: ['#0d6efd', '#20c997'],
          dataLabels: { enabled: false },
          stroke: { curve: 'smooth' },
          xaxis: {
            type: 'datetime',
            categories: [
              '2023-01-01','2023-02-01','2023-03-01',
              '2023-04-01','2023-05-01','2023-06-01','2023-07-01'
            ],
          },
          tooltip: { x: { format: 'MMMM yyyy' } },
        };
        new ApexCharts(document.querySelector('#sales-chart'), monthly_sales_options).render();

        // Pie Chart
        const pie_chart_options = {
          series: [700, 500, 400, 600, 300, 100],
          chart: { type: 'donut' },
          labels: ['Chrome', 'Edge', 'FireFox', 'Safari', 'Opera', 'IE'],
          dataLabels: { enabled: false },
          colors: ['#0d6efd', '#20c997', '#ffc107', '#d63384', '#6f42c1', '#adb5bd'],
        };
        new ApexCharts(document.querySelector('#pie-chart'), pie_chart_options).render();

        // Visitors Chart
        const visitors_chart_options = {
          series: [
            { name: 'High - 2023', data: [100, 120, 170, 167, 180, 177, 160] },
            { name: 'Low - 2023', data: [60, 80, 70, 67, 80, 77, 100] },
          ],
          chart: { height: 200, type: 'line', toolbar: { show: false } },
          colors: ['#0d6efd', '#adb5bd'],
          stroke: { curve: 'smooth' },
          grid: { borderColor: '#e7e7e7', row: { colors: ['#f3f3f3','transparent'], opacity: 0.5 } },
          legend: { show: false },
          markers: { size: 1 },
          xaxis: { categories: ['22th','23th','24th','25th','26th','27th','28th'] },
        };
        new ApexCharts(document.querySelector('#visitors-chart'), visitors_chart_options).render();

        // Bar Sales Chart
        const bar_sales_options = {
          series: [
            { name: 'Net Profit', data: [44, 55, 57, 56, 61, 58, 63, 60, 66] },
            { name: 'Revenue', data: [76, 85, 101, 98, 87, 105, 91, 114, 94] },
            { name: 'Free Cash Flow', data: [35, 41, 36, 26, 45, 48, 52, 53, 41] },
          ],
          chart: { type: 'bar', height: 200 },
          plotOptions: { bar: { horizontal: false, columnWidth: '55%', endingShape: 'rounded' } },
          legend: { show: false },
          colors: ['#0d6efd', '#20c997', '#ffc107'],
          dataLabels: { enabled: false },
          stroke: { show: true, width: 2, colors: ['transparent'] },
          xaxis: { categories: ['Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct'] },
          fill: { opacity: 1 },
          tooltip: { y: { formatter: val => '$ ' + val + ' thousands' } },
        };
        new ApexCharts(document.querySelector('#bar-sales-chart'), bar_sales_options).render();
    </script>

    <!-- JS Vector Map -->
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/js/jsvectormap.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/maps/world.js" crossorigin="anonymous"></script>
    <script>
        new jsVectorMap({ selector: '#world-map', map: 'world' });
    </script>

    @* <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.body.addEventListener('click', function (e) {
                let link = e.target.closest('.nav-link');
                if (!link) return;

                let href = link.getAttribute('href');
                if (!href || href === '#' || href.startsWith('javascript')) return;

                e.preventDefault();

                fetch(href, { headers: { 'X-Requested-With': 'XMLHttpRequest' } })
                    .then(res => res.text())
                    .then(html => {
                        document.querySelector('main.app-main').innerHTML = html;

                        // --- Inisialisasi ulang chart/map/dll setelah partial dimuat ---
                        if (document.querySelector('#revenue-chart')) {
                            const revenue_chart_options = {
                                series: [
                                    { name: 'Digital Goods', data: [28, 48, 40, 19, 86, 27, 90] },
                                    { name: 'Electronics', data: [65, 59, 80, 81, 56, 55, 40] }
                                ],
                                chart: { height: 300, type: 'area', toolbar: { show: false } },
                                legend: { show: false },
                                colors: ['#0d6efd', '#20c997'],
                                dataLabels: { enabled: false },
                                stroke: { curve: 'smooth' },
                                xaxis: { type: 'datetime', categories: ['2023-01-01','2023-02-01','2023-03-01','2023-04-01','2023-05-01','2023-06-01','2023-07-01'] },
                                tooltip: { x: { format: 'MMMM yyyy' } }
                            };
                            new ApexCharts(document.querySelector('#revenue-chart'), revenue_chart_options).render();
                        }

                        if (document.querySelector('#world-map')) {
                            new jsVectorMap({ selector: '#world-map', map: 'world' });
                        }
                    })
                    .catch(err => console.error("Fetch error:", err));
            });
        });
    </script> *@

</body>
</html>
